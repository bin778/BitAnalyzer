#:import OrderBookWidget ui.order_book_widget.OrderBookWidget
#:import App kivy.app.App
#:import dp kivy.metrics.dp

<PriceTrackerLayout>:
    orientation: 'vertical'
    padding: dp(10)
    spacing: dp(10)

    Button:
        text: "< Back to Search"
        size_hint_y: None
        height: dp(40)
        background_color: (0.3, 0.3, 0.3, 1)
        on_release: App.get_running_app().switch_to_explorer()

    ScrollView:
        size_hint_y: 0.85
        do_scroll_x: True
        do_scroll_y: False
        bar_width: dp(10)
        scroll_type: ['bars', 'content']

        BoxLayout:
            id: widgets_container
            orientation: 'horizontal'
            size_hint_x: None
            width: self.minimum_width
            spacing: dp(10)
            padding: dp(5)
            
            OrderBookWidget:
                id: slot_0
                size_hint_x: None
                width: dp(300)
            OrderBookWidget:
                id: slot_1
                size_hint_x: None
                width: dp(300)
            OrderBookWidget:
                id: slot_2
                size_hint_x: None
                width: dp(300)
            OrderBookWidget:
                id: slot_3
                size_hint_x: None
                width: dp(300)
            OrderBookWidget:
                id: slot_4
                size_hint_x: None
                width: dp(300)

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: 0.15
        padding: (0, dp(5), 0, dp(5))
        spacing: dp(2)
        
        Label:
            id: analysis_label
            text: "Kimchi Premium: Calculating..."
            font_size: '18sp'
            halign: 'center'
            valign: 'middle'
            color: (0.8, 0.8, 0.8, 1)
            size_hint_y: None
            height: self.texture_size[1] + dp(5)

        Label:
            id: timestamp_label
            text: "Last Updated: --:--:--"
            font_size: '12sp'
            halign: 'center'
            valign: 'middle'
            color: (0.7, 0.7, 0.7, 1)
            size_hint_y: None
            height: self.texture_size[1]